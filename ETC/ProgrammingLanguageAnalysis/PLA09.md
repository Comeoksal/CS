# 9장 : 서브프로그램

## 📌서브 프로그램

- 일련의 행위나 계산을 추상화로 제공
- 실행과 분리되어 특정 작업만 수행하도록 정의된 독립 코드 블록
- 함수 : 계산 값 반환
- 서브루틴, 프로시저 : 값을 반환하지 않고 특정 작업 수행

### ➡️특징

1. 단일 진입점 (함수 박스 생각)
2. 서브 프로그램 실행시 호출 프로그램은 중지
3. 서브 프로그램 종료시 제어는 호출자에게 반환

### ➡️형식 인자와 실 인자 구분

**위치 매개변수 방식** : 형식 인자와 실 인자의 바인딩이 위치별로 이루어짐, 안전하고 효과적, 대부분의 언어에서 사용

**키워드 매개변수 방식** : 매개변수가 임의 순서로 나타나는 것을 방지하여 키워드로 지정하여 바인딩, **사용자가 공식 매개변수의 키워드를 알고있어야함**

Ada 코드의 키워드 매개변수 방식

```c
procedure sub(kor, math, eng:integer)is
begin
...
end sub

//알**아두기
sub(i, j, k)
sub(i=>math, j=>eng, k=>kor); // 중요**
```

서브 프로그램의 두가지 방식

- 프로시저 : 프로시저는 지정된 특정 처리를 실행하는 서브프로그램
- 함수 : 구조적으로 프로시저와 유사, 의미론적 수학 함수 모델임

함수는 값을 반환, 프로시저는 반환X

**서브프로그램 설계 고려사항**

1. **지역 변수가 정적 변수, 동적 변수인가**
2. 어떤 매개변수 전달 방법 제공
3. 매개변수 유형 확인 방식

---

## 📌매개변수 전달  메커니즘(차이점 알아두기)

1. 참조 호출 (call by reference)

**실 매개변수의 주소를 형식 매개변수로 보내어** 형식 매개변수의 **변화가 바로 실 매개변수에 반영**

1. 값 호출 (call by value)

**실 매개변수의 값을 형식 매개변수에 저장,** **형식 매개변수를 부프로그램의 지역 변수로 사용**(형식 매개변수는 실 매개변수에 영향 X)

장점 : 변수 전달 비용과 접근 시간 효율적, **부프로그램의 변화로부터 호출 프로그램이 보호받음**

단점 : 배열과 같은 구조체의 경우 값을 하나하나 전달해야함

1. 결과 호출 (call by result)

callee가 리턴 직전에 형식 매개변수의 값을 대응되는 **실 매개변수에 복사 후 리턴**

1. 값-결과 호출 (call by value-result)

**callee 실행 시작에 값 호출 기법, callee 실행 끝에 결과 호출 기법**

1. 이름 호출 기법 (call by name)

매개변수를 표현식 자체로 전달, 그 표현식이 참조될 때마다 계산

**매크로와 방식이 유사함(같지는 않음)**

---

## 📌부작용과 이명

프로그래밍 언어의 유해한 특징들

- goto문 → 제어구조 난해
- 포인터 사용 → 이명 발생 유도
- 인자 전달 : call by reference → 사이드 이펙트, 이명 발생

사이드 이펙트 해결 방안

1. 실 매개변수의 원치 않는 값 변화 → 값 전달 기법 사용
2. 비지역변수 사용 제한
3. goto문, 포인터 사용 자제

---

## 📌포괄 기능, 클로저, 코루틴

### ➡️클로저

**함수형 언어에서 사용되는 중요 특성**

**자신이 생성될 때 환경을 기억하는 함수(함수 안의 함수 가능)**

- 현재 상태를 기억하고 변경된 최신 상태 유지
- 전역 변수 사용 억제
- 정보 은닉

```jsx
function outter(){
	var title='coding everday';
	function inner(){
		alert(title);
	}
	inner();
}
```

### ➡️코루틴

**호출된 프로그램의 수행이 완전히 끝나기 전에 타 프로시저로 제어를 넘겼다 재개**

호출하는 곳을 resume이라고 부르는데, 이 resume의 간격이 짧으면 병렬 실행 효과 있음